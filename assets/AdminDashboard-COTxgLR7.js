import{_ as g,b as w,r as m,o as R,a as S,E as D,j as p,l as _,m as u,q as t,n as e,p as o,t as r,s as n,ac as T,a7 as U,a9 as M,ab as x,F as A,A as N,ad as V}from"./index-Bq31S5oz.js";function P(f){return{guest:"访客",user:"用户",admin:"管理员",super_admin:"顶级管理员"}[f]||"未知"}const E={class:"admin-dashboard"},k={class:"stats-grid"},B={class:"stat-content"},C={class:"stat-value"},F={class:"stat-extra"},L={class:"stat-content"},$={class:"stat-value"},j={class:"stat-content"},q={class:"stat-value"},z={class:"stat-content"},I={class:"stat-value"},W={class:"activity-list"},G={class:"activity-content"},H={class:"activity-text"},J={class:"activity-time"},K={__name:"AdminDashboard",setup(f){const v=w(),l=m({totalVisits:0,visitsToday:0,visitsThisMonth:0,totalRecords:0,totalUsers:0,activeUsers:0}),h=m([]),y=async()=>{try{const i=await S.getWebsiteStats();if(i.code===200){const{userStats:s,recordStats:c,visitStats:a,recentActivities:d}=i.data;l.value={totalVisits:a.totalVisits,visitsToday:a.visitsToday,visitsThisMonth:a.visitsThisMonth,totalRecords:c.totalRecords,totalUsers:s.totalUsers,activeUsers:s.activeUsers},h.value=d||[]}else throw new Error(i.message||"获取统计数据失败")}catch(i){D.error("加载统计数据失败: "+i.message);try{await v.fetchRecords(),l.value.totalRecords=v.records.length}catch{}}},b=i=>{const s=new Date(i),a=new Date-s;return a<1e3*60?"刚刚":a<1e3*60*60?`${Math.floor(a/(1e3*60))}分钟前`:a<1e3*60*60*24?`${Math.floor(a/(1e3*60*60))}小时前`:s.toLocaleDateString("zh-CN")};return R(()=>{y()}),(i,s)=>{const c=p("el-icon"),a=p("el-card");return _(),u("div",E,[t("div",k,[e(a,{class:"stat-card"},{default:o(()=>[t("div",B,[t("div",C,r(l.value.totalVisits||"-"),1),s[0]||(s[0]=t("div",{class:"stat-label"},"总访问量",-1)),t("div",F,"今日: "+r(l.value.visitsToday||0),1)]),e(c,{class:"stat-icon"},{default:o(()=>[e(n(T))]),_:1})]),_:1}),e(a,{class:"stat-card"},{default:o(()=>[t("div",L,[t("div",$,r(l.value.totalRecords||"-"),1),s[1]||(s[1]=t("div",{class:"stat-label"},"成绩提交数",-1))]),e(c,{class:"stat-icon"},{default:o(()=>[e(n(U))]),_:1})]),_:1}),e(a,{class:"stat-card"},{default:o(()=>[t("div",j,[t("div",q,r(l.value.totalUsers||"-"),1),s[2]||(s[2]=t("div",{class:"stat-label"},"注册用户数",-1))]),e(c,{class:"stat-icon"},{default:o(()=>[e(n(M))]),_:1})]),_:1}),e(a,{class:"stat-card"},{default:o(()=>[t("div",z,[t("div",I,r(l.value.activeUsers||"-"),1),s[3]||(s[3]=t("div",{class:"stat-label"},"活跃用户数",-1))]),e(c,{class:"stat-icon"},{default:o(()=>[e(n(x))]),_:1})]),_:1})]),s[4]||(s[4]=t("h4",{class:"section-subtitle"},"最近活动",-1)),e(a,{class:"activity-card"},{default:o(()=>[t("div",W,[(_(!0),u(A,null,N(h.value,d=>(_(),u("div",{key:d.id,class:"activity-item"},[e(c,{class:"activity-icon"},{default:o(()=>[e(n(V))]),_:1}),t("div",G,[t("div",H,r(d.description),1),t("div",J,r(b(d.timestamp)),1)])]))),128))])]),_:1})])}}},Q=g(K,[["__scopeId","data-v-ac2baa8d"]]);export{Q as A,P as g};
