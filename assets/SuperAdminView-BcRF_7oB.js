import{_ as et,h as tt,u as at,D as st,r as m,c as lt,o as nt,E as g,a as w,j as p,k as ot,l as d,m as v,q as l,n as t,p as s,x as i,t as f,s as c,a7 as Ce,a8 as rt,a9 as it,aa as ut,ac as dt,a2 as Ve,a4 as ct,T as le,ab as mt,v as h,F as $,A as M,U as pt,a0 as Se,y as Ue,z as F,N as ne,P as oe,$ as re}from"./index-Bsn6c0zj.js";import{g as P,A as vt,a as ft}from"./AdminRecordsTable-DOYgo2aF.js";/* empty css                                                                     */const gt={class:"super-admin-container"},_t={class:"admin-layout"},yt={class:"admin-sidebar"},wt={class:"sidebar-header"},bt={class:"sidebar-footer"},ht={class:"admin-main"},kt={key:0,class:"admin-section"},Ct={key:1,class:"admin-section"},Vt={key:2,class:"admin-section"},St={class:"feedback-list"},Ut={class:"feedback-header"},xt={class:"feedback-user"},zt={class:"feedback-time"},Dt={class:"feedback-content"},$t={class:"feedback-status"},Mt={key:0,class:"empty-feedback"},Rt={key:3,class:"admin-section"},Tt={class:"user-stats-grid"},Bt={class:"role-stats"},Yt={class:"role-stat-item"},Et={class:"role-count"},At={class:"role-stat-item"},Nt={class:"role-count"},Lt={class:"role-stat-item"},qt={class:"role-count"},Ft={class:"status-stats"},Pt={class:"status-stat-item"},It={class:"status-count"},jt={class:"status-stat-item"},Ot={class:"status-count"},Wt={class:"status-stat-item"},Qt={class:"status-count"},Gt={key:4,class:"admin-section"},Ht={class:"section-header"},Jt={class:"section-actions"},Kt={class:"pagination-container"},Xt={key:5,class:"admin-section"},Zt={class:"role-overview"},ea={class:"roles-overview-grid"},ta={class:"role-header"},aa={class:"user-count"},sa={class:"role-permissions"},la={key:6,class:"admin-section"},na={class:"setting-item"},oa={key:7,class:"admin-section"},ra={class:"section-header"},ia={class:"section-actions"},ua={class:"changes-list"},da={key:0,class:"edit-role-content"},ca={class:"role-selection"},ma={class:"changes-editor"},pa={class:"changes-editor"},va={__name:"SuperAdminView",setup(fa){const xe=tt(),ie=at(),ze=st(),k=m("dashboard"),z=m(!1),H=m(!1),ue=m([]),I=m(""),R=m(""),j=m(1),O=m(20),de=m(0),J=m([]),W=m([]),U=m({userCount:0,adminCount:0,superAdminCount:0,activeCount:0,inactiveCount:0,bannedCount:0}),K=m([]),T=m(!1),B=m(!1),u=m({version:"",date:"",changes:[""]}),Y=m(null),E=m(!1),b=m(null),S=m(""),X=m(!1),A=m(!1),Z=m(!1),ce=m([{key:"user",name:"用户",userCount:0,permissions:["view_records","submit_record","edit_own_record"]},{key:"admin",name:"管理员",userCount:0,permissions:["view_records","submit_record","admin_panel"]},{key:"super_admin",name:"超级管理员",userCount:0,permissions:["manage_users","manage_permissions","system_config"]}]),De=lt(()=>{let a=ue.value;if(I.value){const e=I.value.toLowerCase();a=a.filter(r=>{var o,C;return((o=r.nickname)==null?void 0:o.toLowerCase().includes(e))||((C=r.email)==null?void 0:C.toLowerCase().includes(e))})}return R.value&&(a=a.filter(e=>e.role===R.value)),a}),$e=a=>{k.value=a,me(a)},me=async a=>{z.value=!0;try{switch(a){case"dashboard":break;case"records":await pe();break;case"feedback":await Me();break;case"users-stats":await Re();break;case"user-management":await N();break;case"role-management":await Te();break;case"system-settings":await Be();break;case"changelog-management":await Q();break}}catch(e){g.error("加载数据失败: "+e.message)}finally{z.value=!1}},pe=async()=>{H.value=!0;try{let a=[],e=1;const r=100;for(;;){const o=await w.getRecords({page:e,pageSize:r});if(o.code===200&&o.data&&o.data.length>0){if(a=a.concat(o.data),o.data.length<r)break;e++}else break}J.value=a,console.log(`超级管理员页面：获取到${a.length}条成绩记录`)}catch(a){console.error("获取成绩记录失败:",a),g.error("获取成绩记录失败: "+a.message),J.value=[]}finally{H.value=!1}},Me=async()=>{try{const a=await w.getFeedbackList({page:1,pageSize:50});if(a.code===200)W.value=a.data||[];else throw new Error(a.message||"获取用户反馈失败")}catch(a){g.error("获取用户反馈失败: "+a.message),W.value=[]}},Re=async()=>{try{const a=await w.getWebsiteStats();if(a.code===200){const{userStats:e}=a.data;U.value={userCount:e.usersByRole.user,adminCount:e.usersByRole.admin,superAdminCount:e.usersByRole.super_admin,activeCount:e.activeUsers,inactiveCount:e.inactiveUsers,bannedCount:e.bannedUsers}}else throw new Error(a.message||"获取用户统计失败")}catch(a){console.error("获取用户统计失败:",a),g.error("获取用户统计失败: "+a.message)}},N=async()=>{try{const a=await w.getAllUsers({page:j.value,pageSize:O.value,role:R.value});if(a.code===200)ue.value=a.data||[],de.value=a.total||0;else throw new Error(a.message||"获取用户列表失败")}catch(a){console.error("获取用户列表失败:",a),g.error("获取用户列表失败: "+a.message)}},Te=async()=>{try{const a=await w.getWebsiteStats();if(a.code===200){const{userStats:e}=a.data;ce.value.forEach(r=>{r.userCount=e.usersByRole[r.key]||0})}else throw new Error(a.message||"获取角色统计失败")}catch(a){console.error("获取角色统计失败:",a),g.error("获取角色统计失败: "+a.message)}},Be=async()=>{try{const a=await w.getMaintenanceMode();a.code===200&&(A.value=a.data.maintenanceMode||!1)}catch(a){console.error("获取系统设置失败:",a),A.value=!1}},Ye=a=>{b.value=a,S.value=a.role,E.value=!0},Ee=async()=>{if(!(!b.value||!S.value))try{await ne.confirm(`确定要将用户 "${b.value.nickname}" 的角色从 "${P(b.value.role)}" 修改为 "${P(S.value)}" 吗？`,"确认角色变更",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),X.value=!0;const a=await w.updateUserRole(b.value._id,S.value);if(a.code===200)g.success("角色修改成功"),b.value.role=S.value,E.value=!1,await N();else throw new Error(a.message||"角色修改失败")}catch(a){a!=="cancel"&&g.error("角色修改失败: "+a.message)}finally{X.value=!1}},Ae=async a=>{const e=a.status==="active"?"inactive":"active",r=e==="active"?"启用":"禁用";try{await ne.confirm(`确定要${r}用户 "${a.nickname}" 吗？`,`确认${r}`,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const o=await w.updateUserStatus(a._id,e);if(o.code===200)g.success(`用户${r}成功`),a.status=e;else throw new Error(o.message||`用户${r}失败`)}catch(o){o!=="cancel"&&g.error(`用户${r}失败: `+o.message)}},Ne=async a=>{Z.value=!0;try{const e=a?"系统维护升级中，请稍后访问":"",r=await w.setMaintenanceMode(a,e);if(r.code===200)g.success(a?"维护模式已开启":"维护模式已关闭");else throw new Error(r.message||"设置维护模式失败")}catch(e){g.error("设置维护模式失败: "+e.message),A.value=!a}finally{Z.value=!1}},Le=a=>{O.value=a,N()},qe=a=>{j.value=a,N()},Fe=a=>new Date(a).toLocaleDateString("zh-CN"),Pe=a=>{const e=new Date(a),o=new Date-e;return o<1e3*60?"刚刚":o<1e3*60*60?`${Math.floor(o/(1e3*60))}分钟前`:o<1e3*60*60*24?`${Math.floor(o/(1e3*60*60))}小时前`:e.toLocaleDateString("zh-CN")},Ie=a=>({view_records:"查看记录",submit_record:"提交成绩",edit_own_record:"编辑记录",admin_panel:"管理面板",manage_users:"用户管理",manage_permissions:"权限管理",system_config:"系统配置"})[a]||a,Q=async()=>{try{const a=await w.getChangelogs({page:1,pageSize:50});if(a.code===200)K.value=a.data||[];else throw new Error(a.message||"获取更新日志失败")}catch(a){g.error("获取更新日志失败: "+a.message),K.value=[]}},je=()=>{u.value={version:"",date:new Date().toISOString().split("T")[0],changes:[""]},Y.value=null,T.value=!0},Oe=a=>{Y.value=a,u.value={version:a.version,date:a.date,changes:[...a.changes]},B.value=!0},We=async a=>{try{await ne.confirm(`确定要删除版本 "${a.version}" 的更新日志吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await w.deleteChangelog(a._id);if(e.code===200)g.success("更新日志删除成功"),await Q();else throw new Error(e.message||"删除失败")}catch(e){e!=="cancel"&&g.error("删除失败: "+e.message)}},ve=()=>{u.value.changes.push("")},fe=a=>{u.value.changes.length>1&&u.value.changes.splice(a,1)},ge=async()=>{try{if(!u.value.version||!u.value.date){g.error("版本号和日期不能为空");return}const a=u.value.changes.filter(o=>o.trim());if(a.length===0){g.error("至少需要一条更新内容");return}const e={version:u.value.version,date:u.value.date,changes:a};let r;if(Y.value?r=await w.updateChangelog(Y.value._id,e):r=await w.addChangelog(e),r.code===200)g.success(Y.value?"更新日志修改成功":"更新日志添加成功"),T.value=!1,B.value=!1,await Q();else throw new Error(r.message||"操作失败")}catch(a){g.error("操作失败: "+a.message)}},G=a=>({guest:"info",user:"primary",admin:"warning",super_admin:"danger"})[a]||"info";return nt(()=>{if(!ze.hasPermission("super_admin_panel")){g.error("权限不足"),xe.push("/");return}me("dashboard")}),(a,e)=>{const r=p("el-tag"),o=p("el-icon"),C=p("el-menu-item"),_e=p("el-sub-menu"),Qe=p("el-menu"),y=p("el-button"),Ge=p("el-empty"),L=p("el-card"),q=p("el-input"),ee=p("el-option"),He=p("el-select"),V=p("el-table-column"),ye=p("el-button-group"),we=p("el-table"),Je=p("el-pagination"),Ke=p("el-switch"),te=p("el-descriptions-item"),Xe=p("el-descriptions"),ae=p("el-radio"),Ze=p("el-radio-group"),se=p("el-dialog"),D=p("el-form-item"),be=p("el-date-picker"),he=p("el-form"),ke=ot("loading");return d(),v("div",gt,[l("div",_t,[l("aside",yt,[l("div",wt,[e[18]||(e[18]=l("h2",null,"超级管理",-1)),t(r,{type:G(c(ie).userRole),size:"small",effect:"plain"},{default:s(()=>[i(f(c(P)(c(ie).userRole)),1)]),_:1},8,["type"])]),t(Qe,{"default-active":k.value,"onUpdate:defaultActive":e[0]||(e[0]=n=>k.value=n),class:"admin-menu",onSelect:$e},{default:s(()=>[t(_e,{index:"admin-functions"},{title:s(()=>[t(o,null,{default:s(()=>[t(c(Ce))]),_:1}),e[19]||(e[19]=l("span",null,"管理员功能",-1))]),default:s(()=>[t(C,{index:"dashboard"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(Ce))]),_:1}),e[20]||(e[20]=l("span",null,"仪表板",-1))]),_:1}),t(C,{index:"records"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(rt))]),_:1}),e[21]||(e[21]=l("span",null,"成绩管理",-1))]),_:1}),t(C,{index:"feedback"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(it))]),_:1}),e[22]||(e[22]=l("span",null,"用户反馈",-1))]),_:1}),t(C,{index:"users-stats"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(ut))]),_:1}),e[23]||(e[23]=l("span",null,"用户统计",-1))]),_:1})]),_:1}),t(_e,{index:"super-admin-functions"},{title:s(()=>[t(o,null,{default:s(()=>[t(c(Ve))]),_:1}),e[24]||(e[24]=l("span",null,"超级管理",-1))]),default:s(()=>[t(C,{index:"user-management"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(dt))]),_:1}),e[25]||(e[25]=l("span",null,"用户管理",-1))]),_:1}),t(C,{index:"role-management"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(Ve))]),_:1}),e[26]||(e[26]=l("span",null,"权限管理",-1))]),_:1}),t(C,{index:"system-settings"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(ct))]),_:1}),e[27]||(e[27]=l("span",null,"系统设置",-1))]),_:1}),t(C,{index:"changelog-management"},{default:s(()=>[t(o,null,{default:s(()=>[t(c(le))]),_:1}),e[28]||(e[28]=l("span",null,"更新日志",-1))]),_:1})]),_:1})]),_:1},8,["default-active"]),l("div",bt,[t(y,{type:"primary",onClick:e[1]||(e[1]=n=>a.$router.push("/")),plain:""},{default:s(()=>[t(o,null,{default:s(()=>[t(c(mt))]),_:1}),e[29]||(e[29]=i(" 返回首页 "))]),_:1})])]),l("main",ht,[k.value==="dashboard"?(d(),v("div",kt,[e[30]||(e[30]=l("h3",{class:"section-title"},"网站统计",-1)),t(vt)])):h("",!0),k.value==="records"?(d(),v("div",Ct,[e[31]||(e[31]=l("h3",{class:"section-title"},"成绩记录管理",-1)),t(ft,{records:J.value,loading:H.value,onRefresh:pe},null,8,["records","loading"])])):h("",!0),k.value==="feedback"?(d(),v("div",Vt,[e[32]||(e[32]=l("h3",{class:"section-title"},"用户反馈",-1)),t(L,{class:"feedback-card"},{default:s(()=>[l("div",St,[(d(!0),v($,null,M(W.value,n=>(d(),v("div",{key:n._id,class:"feedback-item"},[l("div",Ut,[l("span",xt,f(n.nickname||"匿名用户"),1),l("span",zt,f(Pe(n.timestamp)),1)]),l("div",Dt,f(n.content),1),l("div",$t,[t(r,{type:n.status==="processed"?"success":"warning",size:"small"},{default:s(()=>[i(f(n.status==="processed"?"已处理":"待处理"),1)]),_:2},1032,["type"])])]))),128))]),W.value.length===0?(d(),v("div",Mt,[t(Ge,{description:"暂无用户反馈"})])):h("",!0)]),_:1})])):h("",!0),k.value==="users-stats"?(d(),v("div",Rt,[e[41]||(e[41]=l("h3",{class:"section-title"},"用户统计信息",-1)),l("div",Tt,[t(L,{class:"user-stat-card"},{default:s(()=>[e[36]||(e[36]=l("div",{class:"stat-header"},"角色分布",-1)),l("div",Bt,[l("div",Yt,[e[33]||(e[33]=l("span",{class:"role-name"},"普通用户",-1)),l("span",Et,f(U.value.userCount||0),1)]),l("div",At,[e[34]||(e[34]=l("span",{class:"role-name"},"管理员",-1)),l("span",Nt,f(U.value.adminCount||0),1)]),l("div",Lt,[e[35]||(e[35]=l("span",{class:"role-name"},"超级管理员",-1)),l("span",qt,f(U.value.superAdminCount||0),1)])])]),_:1}),t(L,{class:"user-stat-card"},{default:s(()=>[e[40]||(e[40]=l("div",{class:"stat-header"},"用户状态",-1)),l("div",Ft,[l("div",Pt,[e[37]||(e[37]=l("span",{class:"status-name"},"活跃用户",-1)),l("span",It,f(U.value.activeCount||0),1)]),l("div",jt,[e[38]||(e[38]=l("span",{class:"status-name"},"非活跃用户",-1)),l("span",Ot,f(U.value.inactiveCount||0),1)]),l("div",Wt,[e[39]||(e[39]=l("span",{class:"status-name"},"被禁用户",-1)),l("span",Qt,f(U.value.bannedCount||0),1)])])]),_:1})])])):h("",!0),k.value==="user-management"?(d(),v("div",Gt,[l("div",Ht,[e[43]||(e[43]=l("h3",{class:"section-title"},"用户管理",-1)),l("div",Jt,[t(q,{modelValue:I.value,"onUpdate:modelValue":e[2]||(e[2]=n=>I.value=n),placeholder:"搜索用户...",style:{width:"200px"},clearable:""},{prefix:s(()=>[t(o,null,{default:s(()=>[t(c(pt))]),_:1})]),_:1},8,["modelValue"]),t(He,{modelValue:R.value,"onUpdate:modelValue":e[3]||(e[3]=n=>R.value=n),placeholder:"筛选角色",style:{width:"120px"},clearable:""},{default:s(()=>[t(ee,{label:"用户",value:"user"}),t(ee,{label:"管理员",value:"admin"}),t(ee,{label:"超级管理员",value:"super_admin"})]),_:1},8,["modelValue"]),t(y,{onClick:N,loading:z.value},{default:s(()=>[t(o,null,{default:s(()=>[t(c(Se))]),_:1}),e[42]||(e[42]=i(" 刷新 "))]),_:1},8,["loading"])])]),Ue((d(),F(we,{data:De.value,class:"users-table"},{default:s(()=>[t(V,{prop:"nickname",label:"昵称",width:"120"}),t(V,{prop:"email",label:"邮箱",width:"200"}),t(V,{prop:"role",label:"角色",width:"100"},{default:s(({row:n})=>[t(r,{type:G(n.role),size:"small",effect:"plain"},{default:s(()=>[i(f(c(P)(n.role)),1)]),_:2},1032,["type"])]),_:1}),t(V,{prop:"status",label:"状态",width:"80"},{default:s(({row:n})=>[t(r,{type:n.status==="active"?"success":"warning",size:"small"},{default:s(()=>[i(f(n.status==="active"?"正常":"禁用"),1)]),_:2},1032,["type"])]),_:1}),t(V,{prop:"createTime",label:"注册时间",width:"120"},{default:s(({row:n})=>[i(f(Fe(n.createTime)),1)]),_:1}),t(V,{label:"操作",width:"200"},{default:s(({row:n})=>[t(ye,null,{default:s(()=>[t(y,{size:"small",onClick:_=>Ye(n)},{default:s(()=>[t(o,null,{default:s(()=>[t(c(le))]),_:1}),e[44]||(e[44]=i(" 角色 "))]),_:2},1032,["onClick"]),t(y,{size:"small",type:n.status==="active"?"warning":"success",onClick:_=>Ae(n)},{default:s(()=>[i(f(n.status==="active"?"禁用":"启用"),1)]),_:2},1032,["type","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ke,z.value]]),l("div",Kt,[t(Je,{"current-page":j.value,"onUpdate:currentPage":e[4]||(e[4]=n=>j.value=n),"page-size":O.value,"onUpdate:pageSize":e[5]||(e[5]=n=>O.value=n),"page-sizes":[10,20,50,100],total:de.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Le,onCurrentChange:qe},null,8,["current-page","page-size","total"])])])):h("",!0),k.value==="role-management"?(d(),v("div",Xt,[e[46]||(e[46]=l("h3",{class:"section-title"},"权限管理",-1)),t(L,{class:"role-management-card"},{default:s(()=>[l("div",Zt,[e[45]||(e[45]=l("h4",null,"角色权限概览",-1)),l("div",ea,[(d(!0),v($,null,M(ce.value,n=>(d(),v("div",{key:n.key,class:"role-overview-item"},[l("div",ta,[t(r,{type:G(n.key),effect:"plain"},{default:s(()=>[i(f(n.name),1)]),_:2},1032,["type"]),l("span",aa,f(n.userCount)+" 用户",1)]),l("div",sa,[(d(!0),v($,null,M(n.permissions,_=>(d(),F(r,{key:_,size:"small",class:"permission-tag"},{default:s(()=>[i(f(Ie(_)),1)]),_:2},1024))),128))])]))),128))])])]),_:1})])):h("",!0),k.value==="system-settings"?(d(),v("div",la,[e[48]||(e[48]=l("h3",{class:"section-title"},"系统设置",-1)),t(L,{class:"system-settings-card"},{default:s(()=>[l("div",na,[e[47]||(e[47]=l("div",{class:"setting-info"},[l("h4",null,"维护模式"),l("p",null,"开启后，网站将显示维护页面，仅管理员可访问")],-1)),t(Ke,{modelValue:A.value,"onUpdate:modelValue":e[6]||(e[6]=n=>A.value=n),onChange:Ne,loading:Z.value,size:"large"},null,8,["modelValue","loading"])])]),_:1})])):h("",!0),k.value==="changelog-management"?(d(),v("div",oa,[l("div",ra,[e[51]||(e[51]=l("h3",{class:"section-title"},"更新日志管理",-1)),l("div",ia,[t(y,{type:"primary",onClick:je},{default:s(()=>[t(o,null,{default:s(()=>[t(c(oe))]),_:1}),e[49]||(e[49]=i(" 添加日志 "))]),_:1}),t(y,{onClick:Q,loading:z.value},{default:s(()=>[t(o,null,{default:s(()=>[t(c(Se))]),_:1}),e[50]||(e[50]=i(" 刷新 "))]),_:1},8,["loading"])])]),Ue((d(),F(we,{data:K.value,class:"changelog-table"},{default:s(()=>[t(V,{prop:"version",label:"版本",width:"80"}),t(V,{prop:"date",label:"日期",width:"120"}),t(V,{prop:"changes",label:"更新内容","min-width":"200"},{default:s(({row:n})=>[l("div",ua,[(d(!0),v($,null,M(n.changes,(_,x)=>(d(),v("div",{key:x,class:"change-item"}," • "+f(_),1))),128))])]),_:1}),t(V,{prop:"createdByName",label:"创建者",width:"100"}),t(V,{label:"操作",width:"150"},{default:s(({row:n})=>[t(ye,null,{default:s(()=>[t(y,{size:"small",onClick:_=>Oe(n)},{default:s(()=>[t(o,null,{default:s(()=>[t(c(le))]),_:1}),e[52]||(e[52]=i(" 编辑 "))]),_:2},1032,["onClick"]),t(y,{size:"small",type:"danger",onClick:_=>We(n)},{default:s(()=>[t(o,null,{default:s(()=>[t(c(re))]),_:1}),e[53]||(e[53]=i(" 删除 "))]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[ke,z.value]])])):h("",!0)])]),t(se,{modelValue:E.value,"onUpdate:modelValue":e[9]||(e[9]=n=>E.value=n),title:"编辑用户角色",width:"400px"},{footer:s(()=>{var n;return[t(y,{onClick:e[8]||(e[8]=_=>E.value=!1)},{default:s(()=>e[58]||(e[58]=[i("取消")])),_:1}),t(y,{type:"primary",onClick:Ee,loading:X.value,disabled:!S.value||S.value===((n=b.value)==null?void 0:n.role)},{default:s(()=>e[59]||(e[59]=[i(" 确认修改 ")])),_:1},8,["loading","disabled"])]}),default:s(()=>[b.value?(d(),v("div",da,[t(Xe,{column:1,border:""},{default:s(()=>[t(te,{label:"用户昵称"},{default:s(()=>[i(f(b.value.nickname),1)]),_:1}),t(te,{label:"邮箱"},{default:s(()=>[i(f(b.value.email),1)]),_:1}),t(te,{label:"当前角色"},{default:s(()=>[t(r,{type:G(b.value.role),effect:"plain"},{default:s(()=>[i(f(c(P)(b.value.role)),1)]),_:1},8,["type"])]),_:1})]),_:1}),l("div",ca,[e[57]||(e[57]=l("h4",null,"选择新角色：",-1)),t(Ze,{modelValue:S.value,"onUpdate:modelValue":e[7]||(e[7]=n=>S.value=n)},{default:s(()=>[t(ae,{label:"user"},{default:s(()=>[t(r,{type:"primary",effect:"plain"},{default:s(()=>e[54]||(e[54]=[i("用户")])),_:1})]),_:1}),t(ae,{label:"admin"},{default:s(()=>[t(r,{type:"warning",effect:"plain"},{default:s(()=>e[55]||(e[55]=[i("管理员")])),_:1})]),_:1}),t(ae,{label:"super_admin"},{default:s(()=>[t(r,{type:"danger",effect:"plain"},{default:s(()=>e[56]||(e[56]=[i("超级管理员")])),_:1})]),_:1})]),_:1},8,["modelValue"])])])):h("",!0)]),_:1},8,["modelValue"]),t(se,{modelValue:T.value,"onUpdate:modelValue":e[13]||(e[13]=n=>T.value=n),title:"添加更新日志",width:"500px"},{footer:s(()=>[t(y,{onClick:e[12]||(e[12]=n=>T.value=!1)},{default:s(()=>e[61]||(e[61]=[i("取消")])),_:1}),t(y,{type:"primary",onClick:ge},{default:s(()=>e[62]||(e[62]=[i("确认添加")])),_:1})]),default:s(()=>[t(he,{model:u.value,"label-width":"80px"},{default:s(()=>[t(D,{label:"版本号",required:""},{default:s(()=>[t(q,{modelValue:u.value.version,"onUpdate:modelValue":e[10]||(e[10]=n=>u.value.version=n),placeholder:"如: 5.0"},null,8,["modelValue"])]),_:1}),t(D,{label:"日期",required:""},{default:s(()=>[t(be,{modelValue:u.value.date,"onUpdate:modelValue":e[11]||(e[11]=n=>u.value.date=n),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(D,{label:"更新内容",required:""},{default:s(()=>[l("div",ma,[(d(!0),v($,null,M(u.value.changes,(n,_)=>(d(),v("div",{key:_,class:"change-input-group"},[t(q,{modelValue:u.value.changes[_],"onUpdate:modelValue":x=>u.value.changes[_]=x,placeholder:"输入更新内容...",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),u.value.changes.length>1?(d(),F(y,{key:0,type:"danger",size:"small",onClick:x=>fe(_),style:{"margin-left":"8px"}},{default:s(()=>[t(o,null,{default:s(()=>[t(c(re))]),_:1})]),_:2},1032,["onClick"])):h("",!0)]))),128)),t(y,{type:"primary",size:"small",onClick:ve,style:{"margin-top":"8px"}},{default:s(()=>[t(o,null,{default:s(()=>[t(c(oe))]),_:1}),e[60]||(e[60]=i(" 添加更新内容 "))]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(se,{modelValue:B.value,"onUpdate:modelValue":e[17]||(e[17]=n=>B.value=n),title:"编辑更新日志",width:"500px"},{footer:s(()=>[t(y,{onClick:e[16]||(e[16]=n=>B.value=!1)},{default:s(()=>e[64]||(e[64]=[i("取消")])),_:1}),t(y,{type:"primary",onClick:ge},{default:s(()=>e[65]||(e[65]=[i("确认修改")])),_:1})]),default:s(()=>[t(he,{model:u.value,"label-width":"80px"},{default:s(()=>[t(D,{label:"版本号",required:""},{default:s(()=>[t(q,{modelValue:u.value.version,"onUpdate:modelValue":e[14]||(e[14]=n=>u.value.version=n),placeholder:"如: 5.0"},null,8,["modelValue"])]),_:1}),t(D,{label:"日期",required:""},{default:s(()=>[t(be,{modelValue:u.value.date,"onUpdate:modelValue":e[15]||(e[15]=n=>u.value.date=n),type:"date",placeholder:"选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(D,{label:"更新内容",required:""},{default:s(()=>[l("div",pa,[(d(!0),v($,null,M(u.value.changes,(n,_)=>(d(),v("div",{key:_,class:"change-input-group"},[t(q,{modelValue:u.value.changes[_],"onUpdate:modelValue":x=>u.value.changes[_]=x,placeholder:"输入更新内容...",style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue"]),u.value.changes.length>1?(d(),F(y,{key:0,type:"danger",size:"small",onClick:x=>fe(_),style:{"margin-left":"8px"}},{default:s(()=>[t(o,null,{default:s(()=>[t(c(re))]),_:1})]),_:2},1032,["onClick"])):h("",!0)]))),128)),t(y,{type:"primary",size:"small",onClick:ve,style:{"margin-top":"8px"}},{default:s(()=>[t(o,null,{default:s(()=>[t(c(oe))]),_:1}),e[63]||(e[63]=i(" 添加更新内容 "))]),_:1})])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},wa=et(va,[["__scopeId","data-v-cf5c7782"]]);export{wa as default};
