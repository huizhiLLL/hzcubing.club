import{_ as D,h as V,u as N,D as L,r as f,o as U,a as $,j as A,l as i,m,q as a,n as t,p as n,s,a1 as z,t as y,v as u,x as d,a2 as E,z as w,a3 as I,a4 as R,a5 as T,E as j,a6 as q}from"./index-CK2GeIUh.js";const F={class:"maintenance-container"},P={class:"maintenance-content"},Y={class:"maintenance-icon"},h={class:"maintenance-message"},G={class:"maintenance-info"},H={key:0,class:"update-time"},J={key:1,class:"update-by"},K={key:0,class:"admin-access"},O={key:1,class:"admin-actions"},Q={class:"action-buttons"},W={class:"maintenance-footer"},X={__name:"MaintenanceView",setup(Z){const p=V(),g=N(),l=L(),_=f(!1),S=f(""),k=f(null),b=f(""),M=o=>new Date(o).toLocaleString("zh-CN"),x=()=>{_.value=!1,j.success("登录成功"),l.isSuperAdmin?p.push("/super-admin"):l.isAdmin&&p.push("/admin")},B=async()=>{try{const o=await $.getMaintenanceMode();o.code===200&&(S.value=o.data.reason||"",k.value=o.data.lastUpdated,b.value=o.data.updatedBy)}catch(o){console.error("获取维护模式信息失败:",o)}};return U(()=>{B()}),(o,e)=>{const r=A("el-icon"),C=A("el-divider"),v=A("el-button");return i(),m("div",F,[a("div",P,[a("div",Y,[t(r,{size:"80"},{default:n(()=>[t(s(z))]),_:1})]),e[12]||(e[12]=a("h1",{class:"maintenance-title"},"网站维护中",-1)),a("div",h,[a("p",null,y(S.value||"我们正在对网站进行维护升级，以提供更好的服务体验。"),1),e[5]||(e[5]=a("p",null,"维护期间网站暂时无法访问，请稍后再试。",-1))]),a("div",G,[k.value?(i(),m("p",H," 维护开始时间: "+y(M(k.value)),1)):u("",!0),b.value?(i(),m("p",J," 操作人员: "+y(b.value),1)):u("",!0)]),s(g).user?u("",!0):(i(),m("div",K,[t(C,null,{default:n(()=>e[6]||(e[6]=[d("管理员访问")])),_:1}),t(v,{type:"primary",onClick:e[0]||(e[0]=c=>_.value=!0)},{default:n(()=>[t(r,null,{default:n(()=>[t(s(E))]),_:1}),e[7]||(e[7]=d(" 管理员登录 "))]),_:1})])),s(g).user&&(s(l).isAdmin||s(l).isSuperAdmin)?(i(),m("div",O,[t(C,null,{default:n(()=>e[8]||(e[8]=[d("管理员操作")])),_:1}),a("div",Q,[s(l).isAdmin?(i(),w(v,{key:0,type:"success",onClick:e[1]||(e[1]=c=>s(p).push("/admin"))},{default:n(()=>[t(r,null,{default:n(()=>[t(s(I))]),_:1}),e[9]||(e[9]=d(" 进入管理面板 "))]),_:1})):u("",!0),s(l).isSuperAdmin?(i(),w(v,{key:1,type:"danger",onClick:e[2]||(e[2]=c=>s(p).push("/super-admin"))},{default:n(()=>[t(r,null,{default:n(()=>[t(s(R))]),_:1}),e[10]||(e[10]=d(" 进入超级管理 "))]),_:1})):u("",!0),t(v,{onClick:e[3]||(e[3]=c=>s(g).logout())},{default:n(()=>[t(r,null,{default:n(()=>[t(s(T))]),_:1}),e[11]||(e[11]=d(" 退出登录 "))]),_:1})])])):u("",!0),a("div",W,[a("p",null,"© "+y(new Date().getFullYear())+" 会枝Cubing. All rights reserved.",1)])]),t(q,{visible:_.value,"onUpdate:visible":e[4]||(e[4]=c=>_.value=c),mode:"login",onLoginSuccess:x},null,8,["visible"])])}}},te=D(X,[["__scopeId","data-v-3370099b"]]);export{te as default};
